(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99368],{51855:function(e,t,n){"use strict";var o=n(80318),r=n(30266),i=n(68216),a=n(25997),s=n(14695),l=n(91077),c=n(64616),u=n(92953),p=n(92809),d=n(809),m=n.n(d),g=n(67294),h=n(5152),f=n(35201),v=n.n(f),y=n(99369),_=n(85893);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}var b=(0,h.default)((function(){return n.e(47562).then(n.bind(n,47562))}),{ssr:!1,loadableGenerated:{webpack:function(){return[47562]},modules:["../components/commonComponent/OtpFLow/OtpFlow.js -> ../../estimator/svgcomponents/BackBtnSvgComponent"]}}),O=function(e){(0,l.Z)(n,e);var t=x(n);function n(e){var a;return(0,i.Z)(this,n),a=t.call(this,e),(0,p.Z)((0,s.Z)(a),"otpChangeEvent",function(){var e=(0,r.default)(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,document.getElementById("validError").innerHTML="",!(n.value.length<=4&&/^[0-9]*$/.test(n.value))){e.next=5;break}return e.next=5,a.setState({otp:n.value});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.Z)((0,s.Z)(a),"handleGenerateOtp",function(){var e=(0,r.default)(m().mark((function e(t){var n,o,r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.props.countryCode,o=document.getElementById("otpResendMessage"),e.next=4,a.props.generateOtp(t);case 4:if(200!=(null==(r=e.sent)?void 0:r.status)){e.next=14;break}return e.next=8,a.setState({otpRetryCount:a.state.otpRetryCount+1});case 8:localStorage.setItem("otpCounter",a.state.otpRetryCount),o&&(o.innerHTML="We have resent the OTP to your ".concat(91===n?"number and email id":"email id",", please verify")),o&&(o.style.display=""),a.phoneOtpExpiry(!0),e.next=15;break;case 14:r&&2==t&&(document.getElementById("validError")&&(document.getElementById("validError").innerHTML=""),document.querySelector("."+v().message).classList.add("hide"),document.getElementById("otpLimit")&&document.getElementById("otpLimit").classList.remove("hide"));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.Z)((0,s.Z)(a),"handleVerifyOtp",(0,r.default)(m().mark((function e(){var t,n,o;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.otp,n=document.getElementById("validError"),t.length){e.next=7;break}return n.innerHTML="Please enter a valid OTP",e.abrupt("return");case 7:if(!(t.length>4||t.length<4)){e.next=10;break}return n.innerHTML="OTP should be 4 digit.",e.abrupt("return");case 10:return document.getElementById("verifyOtpOffer").disabled=!0,document.getElementById("verifyOtpOffer").innerHTML='<img src="https://super.homelane.com/loading_dots.GIF"/>',e.next=14,a.props.verifyOtp(t);case 14:if(o=e.sent,!(String(o.msg).startsWith("4")||String(o.msg).startsWith("5")||"mobile_not_found"===String(o.msg).toLowerCase()||"otp_not_verified"===String(o.msg).toLowerCase()||o.error)){e.next=22;break}return document.getElementById("verifyOtpOffer").disabled=!1,document.getElementById("verifyOtpOffer").innerHTML="VERIFY",document.getElementById("validError").innerHTML="Wrong or Expired OTP!",e.abrupt("return",o);case 22:document.getElementById("verifyOtpOffer").disabled=!1,document.getElementById("verifyOtpOffer").innerHTML="VERIFY",document.getElementById("validError").innerHTML="",localStorage.setItem("otpVerifiedStatus",!0),localStorage.setItem("otpCounter",2),a.props.goToNextStep(o);case 28:case"end":return e.stop()}}),e)})))),(0,p.Z)((0,s.Z)(a),"handleBack",(0,r.default)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.goToPreviousStep();case 1:case"end":return e.stop()}}),e)})))),(0,p.Z)((0,s.Z)(a),"maskEmail",(function(e){if(null!=e&&e.length){var t=e.split("@"),n=(0,o.Z)(t,2),r=n[0],i=n[1].split("."),a=(0,o.Z)(i,2),s=a[0],l=a[1];return"".concat(r.substring(0,3)).concat(new Array(r.length-2).join("*"),"@").concat(s[0]).concat(new Array(s.length).join("*"),".").concat(l.substring(0))}})),a.state={otp:"",otpRetryCount:1},a.phoneOtpInterval="",a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.phoneOtpExpiry(!0),localStorage.setItem("otpCounter",this.state.otpRetryCount)}},{key:"getCookieTimer",value:function(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}},{key:"phoneOtpExpiry",value:function(e){var t,n="";this.getCookieTimer("minutes")&&this.getCookieTimer("seconds")&&!e?(t=(0,y.getCookie)("seconds"),n=(0,y.getCookie)("minutes"),1==t&&(n=n>=0?n:0,n--,t=60,this.setCookieTimer("minutes",n,10))):this.getCookieTimer("minutes")||!this.getCookieTimer("seconds")||e?(t=60,n=0):(this.setCookieTimer("minutes",-1,10),t=(0,y.getCookie)("seconds"),n=(0,y.getCookie)("minutes")),t=t&&t>0?t:60,n=n>=0?n:0;var o=document.getElementById("otpExpire");clearInterval(this.phoneOtpInterval);var r=setInterval(function(){t--,this.setCookieTimer("seconds",t,10);var e,i,a="",s="";(s+=1==String(n).length?"0"+n:n,a+=1==String(t).length?"0"+t:t,o)&&(o.classList.remove("hide"),null===(e=document.querySelector("."+v().resendDiv))||void 0===e||e.classList.add(v().unclickable),o.innerHTML='<span style="color:#000;">&nbsp;OTP in &nbsp;</span><span style="color:#ff2c00">'+s+":"+a+"</span>");-1==n&&(clearInterval(r),s=0,a=0,o.classList.add("hide"),null===(i=document.querySelector("."+v().resendDiv))||void 0===i||i.classList.remove(v().unclickable));1==t&&(n--,t=60,this.setCookieTimer("minutes",n,10))}.bind(this),1e3);this.phoneOtpInterval=r}},{key:"setCookieTimer",value:function(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="expires="+o.toGMTString();document.cookie=e+"="+t+"; "+r+"; path=/"}},{key:"render",value:function(){var e=this,t=this.state.otp,n=this.props,o=n.phone,r=n.email,i=n.countryCode,a=n.isEstimateMobile,s=n.isDoowUp;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:v().otpfieldContainer,children:[!a&&(0,_.jsx)("div",{className:v().backButton,onClick:this.handleBack,children:(0,_.jsx)(b,{})}),(0,_.jsx)("div",{className:v().title,children:"Enter OTP"}),(0,_.jsxs)("div",{className:v().otp_desc,children:["Please enter verification code (OTP) sent to ",this.maskEmail(r)," ",91!==i?"registered with ":"and",(0,_.jsx)("br",{}),(0,_.jsxs)("span",{className:v().phone,children:["+",i,"-",o]}),(0,_.jsx)("span",{className:v().change,onClick:this.handleBack,children:"Change"})]}),(0,_.jsx)("div",{className:v().otp_input_container,children:(0,_.jsxs)("div",{className:"",children:[(0,_.jsx)("input",{autoFocus:!0,type:"tel",id:"name0",name:"name",value:t,maxlength:"4",autoComplete:"off",placeholder:"Enter OTP",onChange:this.otpChangeEvent,className:v()["form-input"],onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),(0,_.jsx)("p",{id:"validError",className:v().validErrorOtp})]})}),(0,_.jsx)("div",{className:"".concat(v().buttonContainer," ").concat(s?v().verify_doowUpOtpButton:""),onClick:this.handleVerifyOtp,children:(0,_.jsx)("button",{id:"verifyOtpOffer",className:v().verifyOtpButton,children:"VERIFY"})}),(0,_.jsxs)("div",{className:v().expireMessage_container,children:[(0,_.jsx)("div",{className:v().resendDiv,children:(0,_.jsx)("div",{onClick:function(){return e.handleGenerateOtp(1)},children:"Resend"})}),(0,_.jsx)("p",{className:v().optExpireMessage,children:(0,_.jsx)("span",{className:v().otpExpire,id:"otpExpire"})})]}),(0,_.jsxs)("p",{className:v().message,id:"otpResendMessage",children:["OTP has been sent to your email id ",91===i?"and mobile number":""]}),(0,_.jsx)("p",{className:[v().limitOtp+" hide"],id:"otpLimit",children:"Resend limit exceeded / Invalid mobile number"})]})})}}]),n}(g.Component);t.Z=O},99368:function(e,t,n){"use strict";var o=n(30266),r=n(68216),i=n(25997),a=n(14695),s=n(91077),l=n(64616),c=n(92953),u=n(92809),p=n(809),d=n.n(p),m=n(67294),g=n(5152),h=n(28216),f=(n(59281),n(71136)),v=n(5368),y=n.n(v),_=n(5542),x=n.n(_),b=n(65728),O=n(51855),w=n(99369),I=n(8838),k=n(85893);function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.Z)(e);if(t){var r=(0,c.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var S=(0,g.default)((function(){return n.e(64163).then(n.bind(n,64163))}),{ssr:!1,loadableGenerated:{webpack:function(){return[64163]},modules:["../components/commonComponent/OverlayLoginPopup/OverlayLoginPopup.js -> ../GoogleAuth/GoogleAuth"]}}),N=function(e){(0,s.Z)(l,e);var t,n=C(l);function l(e){var t;return(0,r.Z)(this,l),t=n.call(this,e),(0,u.Z)((0,a.Z)(t),"updateVal",function(){var e=(0,o.default)(d().mark((function e(n,o,r){var i,a,s,l,c,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&o){e.next=2;break}return e.abrupt("return");case 2:i=n.target,a=n.target,s=a.name,l=a.value,a.maxLength,a.type,"phone"==s&&document.getElementById("mobileExistError")&&!document.getElementById("mobileExistError").classList.contains("hide")&&document.getElementById("mobileExistError").classList.add("hide"),"email"==s&&document.getElementById("emailExistError")&&!document.getElementById("emailExistError").classList.contains("hide")&&document.getElementById("emailExistError").classList.add("hide"),document.getElementById("forgot_error")&&(document.getElementById("forgot_error").innerHTML="",document.getElementById("forgotPassword").style.display="block",document.getElementById("forgot_error").style.display="none"),e.t0=o,e.next="phone"===e.t0?10:24;break;case 10:if("login"==r&&document.getElementById("mobileError")&&"block"==document.getElementById("mobileError").style.display&&(document.getElementById("mobileError").innerText=""),(c=document.getElementById("mobileReportMsg"))&&!c.classList.contains("hide")&&c.classList.add("hide"),"IN"===t.state.countryCode.toUpperCase()?i.value.length<=10:i.value.length<=15,!/^[0-9]*$/.test(i.value)){e.next=17;break}return e.next=17,t.setState((0,u.Z)({},s,i.value));case 17:if(p=/^[1-9][0-9]*$/,!("IN"===t.state.countryCode.toUpperCase()?10==t.state.phone.length:t.state.phone.length>3&&t.state.phone.length<=15)||!p.test(l)){e.next=24;break}return document.getElementById("phone__error")&&document.getElementById("phone__error").remove(),i.classList.remove(y().errorInput),document.getElementsByClassName("selected-flag")[0]&&(document.getElementsByClassName("selected-flag")[0].style.borderBottomColor="#ccc"),e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}()),(0,u.Z)((0,a.Z)(t),"isNumber",(function(e,n,o){var r=(o=o||window.event).which?o.which:o.keyCode;return!(r>31&&(r<48||r>57)||(t.state[n]+String.fromCharCode(r)).length>e)||(o.preventDefault(),!1)})),(0,u.Z)((0,a.Z)(t),"updatePostGoogleLoginNotExist",(function(e){t.setState({name:e.user_name,email:e.email,profile_pic:e.profile_pic?e.profile_pic:"",show:"register"})})),(0,u.Z)((0,a.Z)(t),"submitLoginForm",(0,o.default)(d().mark((function e(){var n,o,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,o=n.phone,r=n.countryCode,"IN"===r.toUpperCase()?o.length<10:o.length<=3||o.length>15,o){e.next=6;break}return document.getElementById("mobileError").innerText="Please enter your phone number.",document.getElementById("mobileError").style.display="block",e.abrupt("return");case 6:return document.getElementById("login-mobile-submit").disabled=!0,document.getElementById("login-mobile-submit").innerHTML='<img src="https://super.homelane.com/loading_dots.GIF"/>',dataLayer.push({event:"LoginBtnClick",sourceContainer:"Overlogin popup"}),e.next=11,t.generateOtp();case 11:if(i=e.sent,!String(i.message).startsWith("4")&&!String(i.message).startsWith("5")&&"failed to fetch"!=String(i.message).toLowerCase()){e.next=18;break}return document.getElementById("login-mobile-submit").disabled=!0,document.getElementById("login-mobile-submit").innerHTML='<img src="https://super.homelane.com/loading_dots.GIF"/>',e.abrupt("return");case 18:t.handleOTP(),t.setState({maskedEmail:i.email});case 20:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,a.Z)(t),"wishlistApi",function(){var e=(0,o.default)(d().mark((function e(t,n){var o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("user_id",t),o.append("sku",n),o.append("action","add"),e.next=6,fetch("".concat(x().WEBSITE_URL,"apis/get_product/addToMyDesigns"),{method:"POST",body:o});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),(0,u.Z)((0,a.Z)(t),"addWish",(0,o.default)(d().mark((function e(){var n,o,r,i,a,s,l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("user_id"),(o=new FormData).append("user_id",n),e.next=5,fetch("".concat(WEBSITE_URL,"apis/quotes/getSavedDesigns"),{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){return e.response.saved_designs}));case 5:if(r=e.sent,i=[],r&&r.length>0){a=L(r);try{for(a.s();!(s=a.n()).done;)l=s.value,c=l.common_id,i.push(c)}catch(e){a.e(e)}finally{a.f()}}return e.next=10,t.setState({wish:!0,wishArr:i});case 10:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,a.Z)(t),"generateOtp",(0,o.default)(d().mark((function e(){var n,o,r,i,a,s,l=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:1,o=t.state,r=o.phone,i=o.countryDialCode,(a=new FormData).append("flag",n),2==n&&a.append("type","text"),a.append("country_code",i),t.props.email&&!t.state.isNumberMasked&&a.append("email",t.props.email),(!t.props.email&&t.state.isNumberMasked||t.props.email&&t.state.isNumberMasked)&&a.append("phone",r),e.next=10,fetch("".concat(x().API_URL,"generateLoginOtp"),{method:"POST",body:a}).then((function(e){if(e.ok)return e;throw new Error(e.status)})).then((function(e){return e.json()})).catch((function(e){return console.error(e),e}));case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,a.Z)(t),"handleOTP",(function(){t.setState({show:"otpForm"})})),(0,u.Z)((0,a.Z)(t),"doOtpLogin",function(){var e=(0,o.default)(d().mark((function e(n){var o,r,i,a,s,l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.user_id){e.next=29;break}if(s=(0,w.getExpiryDate)(),document.cookie="user_id="+n.user_id+"; path=/; domain="+x().COOKIE_DOMAIN+"; expires="+s,document.cookie="user_name="+n.email+"; path=/; domain="+x().COOKIE_DOMAIN+"; expires="+s,document.cookie="cus_name="+n.name+"; path=/; domain="+x().COOKIE_DOMAIN+"; expires="+s,document.cookie="customer_id="+n.customer_id+"; path=/; domain="+x().COOKIE_DOMAIN+"; expires="+s,document.cookie="sf_account_id=".concat(null==n?void 0:n.sf_account_id,";path=/; domain=").concat(x().COOKIE_DOMAIN,"; expires=").concat(s),document.cookie="sf_customer_account_id=".concat(null==n?void 0:n.sf_customer_account_id,";path=/; domain=").concat(x().COOKIE_DOMAIN,"; expires=").concat(s),localStorage.setItem("profile_pic",n.profile_pic),localStorage.setItem("email",n.email),localStorage.setItem("user_id",n.user_id),localStorage.setItem("name",n.first_name?n.first_name:n.last_name),localStorage.setItem("phone",n.mobile),localStorage.setItem("city",n.city),localStorage.setItem("djangoAuth",n.accessToken),t.closePopUp(),t.props.loadNudgeCard&&t.props.loadNudgeCard(),null!==(o=t.props)&&void 0!==o&&o.fetchUserInfo&&(null===(r=t.props)||void 0===r||r.fetchUserInfo()),null!==(i=t.props)&&void 0!==i&&i.afterCallback&&(null===(a=t.props)||void 0===a||a.afterCallback(!0)),!localStorage.getItem("sku")){e.next=27;break}return l=localStorage.getItem("sku"),c=localStorage.getItem("user_id"),e.next=24,t.wishlistApi(c,l);case 24:return e.next=26,setTimeout((function(){localStorage.removeItem("sku")}),1e3);case 26:t.addWish();case 27:dataLayer.push({event:"userSignIn","input-name":n.first_name,"input-email":n.email,"input-phone":"".concat(null==n?void 0:n.country_code).concat(null==n?void 0:n.mobile),"selected-city":n.city,sourceContainer:"Overlogin popup"}),null!=n&&n.trigger_pixel&&dataLayer.push({event:"pixelTriggerLogin"});case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,a.Z)(t),"handleBackButton",(function(){t.setState({show:"login"}),document.getElementById("bfcContainer")&&(document.querySelector("body").style.overflowY="scroll"),t.props.triggerLoginOverlay()})),(0,u.Z)((0,a.Z)(t),"verifyOtp",function(){var e=(0,o.default)(d().mark((function e(n){var o,r,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.state,r=o.phone,i=o.countryDialCode,(a=new FormData).append("otp",n),a.append("otpLogin",!0),a.append("ajax_mode","1"),a.append("country_code",i),t.props.email&&!t.state.isNumberMasked&&a.append("email",t.props.email),(!t.props.email&&t.state.isNumberMasked||t.props.email&&t.state.isNumberMasked)&&a.append("phone",r),e.next=10,fetch("".concat(x().WEBSITE_URL,"user/login"),{method:"POST",body:a}).then((function(e){return e.json()})).catch((function(e){return console.error(e),e}));case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,a.Z)(t),"onFocusInput",(function(){document.getElementById("loginphone").classList.toggle(y().focused)})),(0,u.Z)((0,a.Z)(t),"toggleFocus",(function(){document.getElementById("loginphone").classList.toggle(y().focused)})),(0,u.Z)((0,a.Z)(t),"triggerSignUpForm",(function(){dataLayer.push({event:"TriggerSignUpForm",sourceContainer:"Overlogin popup"}),document.getElementById("bfcContainer")&&(document.querySelector("body").style.overflowY="scroll"),t.props.triggerLoginOverlay()})),(0,u.Z)((0,a.Z)(t),"closeOverlayLoginPopup",(function(){dataLayer.push({event:"CloseOverlayLoginPopup",sourceContainer:"Overlogin popup"}),!t.context.isMobile&&document.getElementById("bfcContainer")&&(document.querySelector("body").style.overflowY="scroll"),t.context.isMobile&&!document.getElementById("popup-btn")&&(document.querySelector("body").style.overflowY="scroll"),t.props.triggerLoginOverlay()})),t.state={phone:t.props.phoneNumber?t.props.phoneNumber:"",phoneValid:!1,cookieCity:"",showOtp:!1,flow:"otp",registerResp:"",showLoader:!0,countryCode:t.props.countryCode?t.props.countryCode:"in",countryDialCode:91,countryName:"India",show:"login",isNumberMasked:t.props.isNumberMasked?t.props.isNumberMasked:""},t}return(0,i.Z)(l,[{key:"componentDidMount",value:function(){dataLayer.push({event:"TriggerOverLoginPopup"}),this.props.allowOverflow||(document.querySelector("body").style.overflowY="hidden")}},{key:"handleLogin",value:(t=(0,o.default)(d().mark((function e(t){var n,o,r,i,a,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("google_btn_wrapper").classList.add("google_btn_loading"),n="",t&&Object.keys(t).length){e.next=4;break}return e.abrupt("return");case 4:return n=t.google?"email=".concat(t.email,"&user_name=").concat(t.name,"&googleAccessToken=").concat(t.accessToken,"&google_user=Yes&ajax_mode=1"):"email=".concat(t.email,"&user_name=").concat(t.name,"&fbAccessToken=").concat(t.accessToken,"&facebook_user=Yes&ajax_mode=1"),e.next=7,fetch(x().WEBSITE_URL+"user/login",{method:"POST",body:n,headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:return o=e.sent,e.next=10,o.json();case 10:if(!(r=e.sent).user_id){e.next=32;break}return null!==(i=this.props)&&void 0!==i&&i.sfleadGen&&(null===(a=this.props)||void 0===a||a.handleCustomerRedirection()),s=(0,w.getExpiryDate)(),document.cookie="user_id="+r.user_id+"; path=/; domain="+x().COOKIE_DOMAIN+"; expires="+s,document.cookie="user_name="+(r.encoded_email?r.encoded_email:r.email)+"; path=/; domain="+x().COOKIE_DOMAIN+"; expires="+s,document.cookie="sf_account_id=".concat(null==r?void 0:r.sf_account_id,";path=/; domain=").concat(x().COOKIE_DOMAIN,"; expires=").concat(s),document.cookie="customer_id=".concat(null==r?void 0:r.customer_id,";path=/; domain=").concat(x().COOKIE_DOMAIN,"; expires=").concat(s),document.cookie="sf_customer_account_id=".concat(null==r?void 0:r.sf_customer_account_id,";path=/; domain=").concat(x().COOKIE_DOMAIN,"; expires=").concat(s),localStorage.setItem("profile_pic",r.profile_pic),localStorage.setItem("email",r.email),localStorage.setItem("user_id",r.user_id),localStorage.setItem("name",r.first_name?r.first_name:r.last_name),localStorage.setItem("phone",r.phone?r.phone:r.mobile),localStorage.setItem("city",r.city),localStorage.setItem("djangoAuth",r.accessToken),dataLayer.push({event:"userSignIn","input-name":r.first_name,"input-email":r.email,"input-phone":"".concat(r.country_code).concat(r.mobile),"selected-city":r.city,sourceContainer:"Google Login Overlogin popup"}),null!=r&&r.trigger_pixel&&dataLayer.push({event:"pixelTriggerLogin"}),document.getElementById("google_btn_wrapper").classList.remove("google_btn_loading"),e.abrupt("return",!0);case 32:return document.getElementById("google_btn_wrapper").classList.remove("google_btn_loading"),e.abrupt("return",!1);case 34:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"closePopUp",value:function(){this.props.triggerLoginOverlay(),this.props.closeRegLoginForm(),this.props.closeBfc(),document.querySelector("body").style.overflowY="scroll"}},{key:"render",value:function(){var e=this,t=this.props,n=(t.triggerLoginOverlay,t.fetchUserInfo),o=t.loadNudgeCard,r=this.state,i=(r.optWhatsApp,r.countryDialCode),a=r.phone,s=(r.show,r.maskedEmail);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("style",{children:"\n                    .allow-dropdown.intl-tel-input {display: block;}\n                    .intl-tel-input .country-list { white-space: inherit; width: 100%; z-index: 3;}\n                    .intl-tel-input.allow-dropdown .selected-flag { display: inline-flex; align-items: flex-start; justify-content: flex-start; top: 2px; border-bottom: 1px solid rgba(71, 74, 80, 0.2);}\n                    .intl-tel-input .flag-container .arrow { margin-top: 5px; display: none;}\n                    .intl-tel-input .country-list .country {padding: 10px 5px; line-height: 16px; font-size: 13px; font-weight: 500;}\n                    .intl-tel-input.allow-dropdown .flag-container:hover .selected-flag { background: unset; }\n                    .iti-flag { min-height: 14px; max-height: 14px; background-color: unset; box-shadow: unset;}\n                    .boxed-border .intl-tel-input.allow-dropdown .selected-flag { justify-content: center; align-items: center; border: 0; }\n                    @media (max-width: 768px) {.intl-tel-input.allow-dropdown .selected-flag { top: 1px;}; .divider { height: unset; background: unset;}} \n                    .hide {\n                        display: none;\n                    }\n                "}),(0,k.jsxs)("div",{className:y()["overlay-login-popup"],children:[(0,k.jsx)("div",{className:y()["overlay-wrapper-bg"]}),(0,k.jsxs)("div",{className:y()["overlay-container"],children:[(0,k.jsx)(k.Fragment,{children:"login"==this.state.show&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:y()["existing-heading"],children:[this.props.email&&!this.state.isNumberMasked&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:y().highlightText,children:"This email id already exists."}),(0,k.jsx)("span",{children:" Please login with your registered mobile number or use a different email id to signup."})]}),(!this.props.email&&this.state.isNumberMasked||this.props.email&&this.state.isNumberMasked)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{className:y().highlightText,children:"This number already exists."}),(0,k.jsx)("span",{children:" Please login with your registered mobile number or use a different number to signup."})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:y()["box-title"],children:"Login"}),(0,k.jsxs)("div",{className:y().loginComponent,children:[(0,k.jsx)("div",{className:y().close,onClick:this.closeOverlayLoginPopup,children:(0,k.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsx)("path",{d:"M1.34315 1.65685L7 7.31371M12.6569 12.9706L7 7.31371M7 7.31371L12.6569 1.65685M7 7.31371L1.34315 12.9706",stroke:"#474A50","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})})}),(0,k.jsxs)("div",{className:y()["frm-grp"],children:[(0,k.jsxs)("div",{className:y().phoneBorder+" boxed-border",children:[(0,k.jsx)(f.default,{disabled:!0,numberType:"tel",autoPlaceholder:!1,useMobileFullscreenDropdown:!1,preferredCountries:[this.state.countryCode],onSelectFlag:function(t,n){e.handleCountryCode(t,n,"loginphone")},inputClassName:y()["frm-input"]+" "+y()["inner-input-child"]+" "+y().boxborderHeight}),(0,k.jsx)("input",{type:"tel",name:"phone",id:"loginphone",autoComplete:"off",onFocus:this.toggleFocus,onBlur:this.toggleFocus,value:this.state.phone,placeholder:"Phone number",onInput:function(t){return e.updateVal(t,"phone","login")},disabled:!(!this.props.email&&!this.state.phone),onKeyPress:function(){return e.isNumber("IN"===e.state.countryCode.toUpperCase()?10:15,"phone")},maxLength:"IN"===this.state.countryCode.toUpperCase()?"10":"15",className:y()["frm-input"]+" "+y()["add-country-box"]+" "+y().boxborderInput})]}),(0,k.jsx)("div",{id:"mobileError",className:y().errMsg}),(0,k.jsxs)("div",{id:"mobileExistError",className:y().errMsg+" hide",children:["Please enter an existing mobile number ",(0,k.jsx)("br",{})," or ",(0,k.jsx)("a",{id:"login-mobile-submit",className:y().errLink,onClick:this.switchLoginSignUp,href:"javascript:void(0)",children:"Sign-up "}),"with +",i,"-",a]})]}),(0,k.jsx)("button",{type:"submit",onClick:this.submitLoginForm,className:y().mainBtn,children:"Login"}),(0,k.jsx)("div",{className:y().orOtherSignOptionsMain,children:(0,k.jsxs)("div",{className:y().orOtherSignOptions,children:[(0,k.jsx)("span",{className:y().orSignUpTxtSpan,children:"Or Login in with"}),(0,k.jsx)("div",{className:y().socialLinks,children:(0,k.jsx)(S,{handleLogin:this.handleLogin,addWish:this.props.addWish,showNudgeCard:o,afterCallback:n,updatePostGoogleLoginNotExist:this.updatePostGoogleLoginNotExist,sourceContainer:"Overlogin popup"})}),(0,k.jsxs)("div",{className:y()["exist-user"],children:[(0,k.jsx)("span",{children:"First time User? "}),(0,k.jsx)("a",{className:y().login,href:"javascript:void(0)",onClick:this.triggerSignUpForm,children:"Sign up"}),(0,k.jsx)("span",{className:y()["exist-user"],children:" here"})]})]})})]})]})]})}),(0,k.jsx)(k.Fragment,{children:"otpForm"==this.state.show&&(0,k.jsx)("div",{className:y().otpWrapper,children:(0,k.jsx)(O.Z,{generateOtp:this.generateOtp,phone:a,email:s,goToPreviousStep:this.handleBackButton,goToNextStep:this.doOtpLogin,countryCode:this.state.countryDialCode,verifyOtp:this.verifyOtp})})})]})]})]})}}]),l}(m.Component);(0,u.Z)(N,"contextType",b.Z);t.Z=(0,h.$j)((function(e){var t,n,o,r,i,a,s,l,c,u,p;return{isLoggedIn:null==e||null===(t=e.userInfo)||void 0===t?void 0:t.isLogdedIn,isOtpVisible:null==e||null===(n=e.userInfo)||void 0===n?void 0:n.otpPopup,signUpSource:null==e||null===(o=e.userInfo)||void 0===o?void 0:o.SignUpSource,userObj:null==e||null===(r=e.userInfo)||void 0===r?void 0:r.userObj,isRegLoginFormOpen:null==e||null===(i=e.userInfo)||void 0===i?void 0:i.OpenLoginRegPopUp,openLoginScreen:null==e||null===(a=e.userInfo)||void 0===a?void 0:a.openLoginScreen,user_id:null==e||null===(s=e.userInfo)||void 0===s||null===(l=s.userObj)||void 0===l?void 0:l.user_id,variant:null==e||null===(c=e.userInfo)||void 0===c?void 0:c.variant,wishlistData:null==e||null===(u=e.userInfo)||void 0===u?void 0:u.wishlistData,showBfcCta:null==e||null===(p=e.userInfo)||void 0===p?void 0:p.showBfcCta}}),(function(e){return{fetchUserInfo:function(){return e(I.Bz.apply(void 0,arguments))},openOtp:function(){return e((0,I.nH)())},closeOtp:function(){return e((0,I.dN)())},logOut:function(){return e((0,I.jg)())},openRegLoginForm:function(){return e((0,I.XH)())},closeRegLoginForm:function(){return e((0,I.Qr)())},loadNudgeCard:function(){return e((0,I.C3)())},handleVariants:function(){return e(I.Sh.apply(void 0,arguments))},openBfc:function(){return e(I.C$.apply(void 0,arguments))},closeBfc:function(){return e((0,I.v4)())}}}))(N)},35201:function(e){e.exports={otpfieldContainer:"OtpFlow_otpfieldContainer__3zMNA",otp_desc:"OtpFlow_otp_desc__25r6y",phone:"OtpFlow_phone__1qL93",change:"OtpFlow_change__wBfAX","form-input":"OtpFlow_form-input__3itio",expireMessage_container:"OtpFlow_expireMessage_container__UKfgF",otpExpire:"OtpFlow_otpExpire__1H5lF",otp_input_container:"OtpFlow_otp_input_container__3LO1w",validErrorOtp:"OtpFlow_validErrorOtp__2Hgrx",title:"OtpFlow_title__1EmZe",backButton:"OtpFlow_backButton__2Hvyl",buttonContainer:"OtpFlow_buttonContainer__324MM",resendDiv:"OtpFlow_resendDiv__3vmpb",limitOtp:"OtpFlow_limitOtp__2mXRJ",message:"OtpFlow_message__wINtx",unclickable:"OtpFlow_unclickable__3oR4d",verify_doowUpOtpButton:"OtpFlow_verify_doowUpOtpButton__3BynT"}},5368:function(e){e.exports={"overlay-login-popup":"OverlayLoginPopup_overlay-login-popup__14EcT","overlay-wrapper-bg":"OverlayLoginPopup_overlay-wrapper-bg__1kwIc","overlay-container":"OverlayLoginPopup_overlay-container__rY6_Z","existing-heading":"OverlayLoginPopup_existing-heading__3Lv6J",highlightText:"OverlayLoginPopup_highlightText__10X_E","box-title":"OverlayLoginPopup_box-title__2d1bs",loginComponent:"OverlayLoginPopup_loginComponent__3bWJ7",close:"OverlayLoginPopup_close__24Xr-","frm-grp":"OverlayLoginPopup_frm-grp__1GE1e",phoneBorder:"OverlayLoginPopup_phoneBorder__F2596","frm-input":"OverlayLoginPopup_frm-input__32CjD","inner-input-child":"OverlayLoginPopup_inner-input-child__EJdmt",boxborderHeight:"OverlayLoginPopup_boxborderHeight__FDwUL","add-country-box":"OverlayLoginPopup_add-country-box__1JvuD",boxborderInput:"OverlayLoginPopup_boxborderInput__3_Pin",errMsg:"OverlayLoginPopup_errMsg__2SCRL",errLink:"OverlayLoginPopup_errLink__-flw9",mainBtn:"OverlayLoginPopup_mainBtn__14wK2",orOtherSignOptionsMain:"OverlayLoginPopup_orOtherSignOptionsMain__3Yes3",orOtherSignOptions:"OverlayLoginPopup_orOtherSignOptions__1xJI6",orSignUpTxtSpan:"OverlayLoginPopup_orSignUpTxtSpan__2PGL8",socialLinks:"OverlayLoginPopup_socialLinks__NjeDe","exist-user":"OverlayLoginPopup_exist-user__B5Xe-",login:"OverlayLoginPopup_login__1fYlM","error-lab":"OverlayLoginPopup_error-lab__14IFe",otpWrapper:"OverlayLoginPopup_otpWrapper__2nAdf"}}}]);